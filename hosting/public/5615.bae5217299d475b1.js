"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5615],{5615:(Z,l,t)=>{t.r(l),t.d(l,{UbicacionPageModule:()=>v});var d=t(6814),g=t(95),n=t(1929),u=t(2891),b=t(7142),e=t(9212),h=t(2389),m=t(8662),p=t(7104);const f=[{path:"",component:(()=>{var o;class c{constructor(i,a,s,P){this.router=i,this.authService=a,this.geolocation=s,this.firestore=P,this.latitude=0,this.longitude=0,this.options={timeout:1e4,enableHighAccuracy:!0,maximumAge:3600}}ngOnInit(){this.authService.getId().subscribe(i=>{(!i||!i.uid)&&(console.error("Usuario no autenticado. No se puede obtener el ID"),this.router.navigate(["loader"]))})}getCurrentCoordinates(){this.geolocation.getCurrentPosition().then(i=>{this.latitude=i.coords.latitude,this.longitude=i.coords.longitude,this.authService.getId().subscribe(a=>{a&&a.uid?this.firestore.collection(`ubicaciones/${a.uid}/user_locations`).add({latitude:this.latitude,longitude:this.longitude,timestamp:b.Z.firestore.FieldValue.serverTimestamp()}).then(()=>{console.log("Ubicaci\xf3n guardada en Firebase"),setTimeout(()=>{this.router.navigate(["chat"])})}).catch(s=>{console.error("Error al guardar ubicaci\xf3n en Firebase:",s)}):(console.error("Usuario no autenticado. No se puede obtener el ID"),this.router.navigate(["loader"]))})}).catch(i=>{console.log("Error, no se puede obtener tu ubicacion",i)})}}return(o=c).\u0275fac=function(i){return new(i||o)(e.Y36(u.F0),e.Y36(h.$),e.Y36(m.b),e.Y36(p.ST))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ubicacion"]],decls:21,vars:3,consts:[[3,"translucent"],[1,"ion-padding"],["expand","block","fill","clear","color","primary","expand","block",1,"msg-btn",3,"click"],["color","danger","slot","end"]],template:function(i,a){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Ubicaci\xf3n"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"div",1)(6,"ion-button",2),e.NdJ("click",function(){return a.getCurrentCoordinates()}),e._uU(7," Obtener Ubicaci\xf3n "),e.qZA(),e.TgZ(8,"ion-list")(9,"ion-list-header"),e._uU(10," Coordenadas de la Ubicaci\xf3n "),e.qZA(),e.TgZ(11,"ion-item")(12,"ion-label"),e._uU(13,"Latitud"),e.qZA(),e.TgZ(14,"ion-badge",3),e._uU(15),e.qZA()(),e.TgZ(16,"ion-item")(17,"ion-label"),e._uU(18,"Longitud"),e.qZA(),e.TgZ(19,"ion-badge",3),e._uU(20),e.qZA()()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(15),e.Oqu(a.latitude),e.xp6(5),e.Oqu(a.longitude))},dependencies:[n.yp,n.YG,n.W2,n.Gu,n.Ie,n.Q$,n.q_,n.yh,n.wd,n.sr],styles:[".msg-btn[_ngcontent-%COMP%]{margin:50px;padding:10px;width:80%;display:flex;font-size:100px;background-color:#2f4f4f;font-size:1.5em;border:solid;border-radius:10px}"]}),c})()}];let U=(()=>{var o;class c{}return(o=c).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(f),u.Bz]}),c})(),v=(()=>{var o;class c{}return(o=c).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,g.u5,n.Pc,U]}),c})()}}]);